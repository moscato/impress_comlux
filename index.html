<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ACJ TwoTwenty </title>
    <link rel="shortcut icon" type="image/jpg" href="./fav.png"/>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>

    <style>
        body {
            margin: 0;
            /* background-image: url('./sky_2.jpg'); */
            background-color: blue;
            /* background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%), url('./sky_2.jpg'); */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        .topTxt {
            margin-top: 20px;
            margin-bottom: 20px;
            border: 2px solid #000;
            background-color: #696969;
            opacity: 0.9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            position: relative;
            text-align: center;
            min-height: 150px; /* Adjust this value as needed */
        }

        .learnTxt {
            font-size: 0.8em;
            position: absolute;
            bottom: 5px; /* Increased from 10px to 20px */
            right: 10px;
            text-align: right;
        }

        .canvas-container {
            position: relative;
            width: 800px; /* Same as fixedWidth */
            height: 500px; /* Same as fixedHeight */
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.9; /* Adjust the opacity value as needed (0.0 to 1.0) */
            border: 2px solid #000;
        }

    </style>
</head>

<body>
    <div class="topTxt">
        <h1> Welcome to the ACJ TwoTwenty!</h1>
        <h2> Touch to rotate and get to know your new aircraft!</h2>
          <br />
        <h3 class="learnTxt"><a href="https://www.comlux.com/aircraft-for-sale/Airbus-ACJ-TwoTwenty" target="_blank">Learn More!</a></h3>
    </div>
    <div class="canvas-container">
        <script>
            // Set up the scene, camera, and renderer
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });

            // Set fixed dimensions for the canvas
            const fixedWidth = 800; // Replace with your desired width
            const fixedHeight = 500; // Replace with your desired height
            renderer.setSize(fixedWidth, fixedHeight);
            renderer.setClearColor(0x696969, 1);
            document.querySelector('.canvas-container').appendChild(renderer.domElement);

            // Add orbit controls
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.25;

            // Add better lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 10);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 10);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);

            const pointLight = new THREE.PointLight(0xffffff, 1.5, 100);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            // Point light from the bottom
            const bottomLight = new THREE.PointLight(0xffffff, 5, 100);
            bottomLight.position.set(0, -10, 0); // Positioned below the model
            scene.add(bottomLight)

            // Point light from the left
            const leftLight = new THREE.PointLight(0xffffff, 5, 100);
            leftLight.position.set(-10, 0, 0); // Positioned to the left of the model
            scene.add(leftLight);

            // Load the GLB model
            const loader = new THREE.GLTFLoader();
            loader.load(
                './acj.glb',
                function (gltf) {
                    // Scale the model if needed
                    gltf.scene.scale.set(2, 2, 2); // Adjust scale as necessary
                    scene.add(gltf.scene);

                    // Rotate the model slightly to the right on page load
                    gltf.scene.rotation.y = Math.PI / 4; // 8? 20 makes it action shot -> Rotate 22.5 degrees around the Y-axis
                },
                undefined,
                function (error) {
                    console.error(error);
                }
            );

            // Position the camera
            camera.position.z = 2; // Moved further back

            // Update camera aspect ratio
            camera.aspect = fixedWidth / fixedHeight;
            camera.updateProjectionMatrix();

            // Update resize event handler
            window.addEventListener('resize', function() {
                // Since we're using fixed dimensions, we don't need to update the size here
                // but we'll keep the camera aspect ratio updated in case of other changes
                camera.aspect = fixedWidth / fixedHeight;
                camera.updateProjectionMatrix();
            });

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
        </script>
    </div>
</body>
</html>